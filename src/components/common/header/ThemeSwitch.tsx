import { useTheme } from 'next-themes';
import { useEffect, useState } from 'react';

export const ThemeSwitch = () => {
  const { resolvedTheme, setTheme } = useTheme();

  return (
    <div className='flex h-5 w-5 items-center justify-center rounded-full p-0.5 lg:h-9 lg:w-9 lg:bg-neutral-alpha-04'>
      <button
        onClick={() => {
          if (resolvedTheme === 'dark') {
            setTheme('light');
            localStorage.setItem('theme', 'light');
          } else {
            setTheme('dark');
            localStorage.setItem('theme', 'dark');
          }
        }}
        className='rounded-full bg-dark-thumb p-1 text-dark-default hover:brightness-125 lg:bg-line-dark-blue'
        aria-label='Theme'
      >
        <ThemeSwitchIcon resolvedTheme={resolvedTheme || 'dark'} />
      </button>
    </div>
  );
};

// ThemeSwitchIcon props
type ThemeSwitchIconProps = {
  resolvedTheme: string;
};

const ThemeSwitchIcon = ({ resolvedTheme }: ThemeSwitchIconProps) => {
  return (
    <>
      <svg
        width='16'
        height='16'
        className={`${resolvedTheme === 'dark' ? 'hidden' : ''} h-4 w-4`}
        viewBox='0 0 16 16'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          d='M14.5965 8.88928C14.5324 8.82501 14.4519 8.77942 14.3639 8.75739C14.2758 8.73537 14.1833 8.73775 14.0965 8.76428C13.1431 9.0525 12.1294 9.07667 11.1633 8.8342C10.1973 8.59174 9.31513 8.09172 8.61085 7.38744C7.90657 6.68315 7.40655 5.80099 7.16408 4.83494C6.92162 3.8689 6.94578 2.85517 7.23401 1.90178C7.26076 1.81491 7.26332 1.72238 7.24142 1.63416C7.21951 1.54594 7.17398 1.46536 7.1097 1.40109C7.04543 1.33681 6.96484 1.29127 6.87662 1.26937C6.7884 1.24747 6.69588 1.25003 6.60901 1.27678C5.2909 1.68056 4.13372 2.48977 3.30213 3.58928C2.57489 4.55481 2.13129 5.70401 2.02117 6.90776C1.91105 8.11151 2.13878 9.32212 2.67876 10.4036C3.21875 11.485 4.04959 12.3945 5.07796 13.0298C6.10633 13.6651 7.29148 14.001 8.50026 13.9999C9.91047 14.0042 11.2832 13.5458 12.4078 12.6949C13.5073 11.8633 14.3165 10.7061 14.7203 9.38803C14.7467 9.30148 14.7492 9.20937 14.7274 9.12154C14.7056 9.0337 14.6603 8.95343 14.5965 8.88928ZM11.8065 11.8962C10.7475 12.6938 9.43594 13.0821 8.11335 12.9895C6.79076 12.8969 5.54613 12.3296 4.60859 11.3922C3.67105 10.4547 3.1037 9.21011 3.01099 7.88752C2.91827 6.56494 3.30643 5.25338 4.10401 4.19428C4.62363 3.50807 5.29542 2.95181 6.06651 2.56928C6.02258 2.87755 6.00044 3.18852 6.00026 3.4999C6.00208 5.22325 6.68748 6.8755 7.90607 8.09409C9.12466 9.31268 10.7769 9.99809 12.5003 9.9999C12.8123 9.99981 13.1239 9.97767 13.4328 9.93365C13.0499 10.7049 12.4932 11.3767 11.8065 11.8962Z'
          fill='#FDFDFD'
        />
      </svg>

      <svg
        width='16'
        height='16'
        viewBox='0 0 16 16'
        fill='none'
        className={`${resolvedTheme === 'light' ? 'hidden' : ''}`}
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          d='M7.25 2.25V1.25C7.25 1.05109 7.32902 0.860322 7.46967 0.71967C7.61032 0.579018 7.80109 0.5 8 0.5C8.19891 0.5 8.38968 0.579018 8.53033 0.71967C8.67098 0.860322 8.75 1.05109 8.75 1.25V2.25C8.75 2.44891 8.67098 2.63968 8.53033 2.78033C8.38968 2.92098 8.19891 3 8 3C7.80109 3 7.61032 2.92098 7.46967 2.78033C7.32902 2.63968 7.25 2.44891 7.25 2.25ZM12.25 8C12.25 8.84057 12.0007 9.66226 11.5337 10.3612C11.0667 11.0601 10.403 11.6048 9.6264 11.9265C8.84982 12.2482 7.99529 12.3323 7.17087 12.1683C6.34645 12.0044 5.58917 11.5996 4.9948 11.0052C4.40042 10.4108 3.99565 9.65355 3.83166 8.82913C3.66768 8.00471 3.75184 7.15018 4.07351 6.3736C4.39518 5.59701 4.93992 4.93325 5.63883 4.46625C6.33774 3.99926 7.15943 3.75 8 3.75C9.12681 3.75116 10.2071 4.1993 11.0039 4.99608C11.8007 5.79285 12.2488 6.87319 12.25 8ZM10.75 8C10.75 7.4561 10.5887 6.92442 10.2865 6.47218C9.98437 6.01995 9.55488 5.66747 9.05238 5.45933C8.54988 5.25119 7.99695 5.19673 7.4635 5.30284C6.93005 5.40895 6.44005 5.67086 6.05546 6.05546C5.67086 6.44005 5.40895 6.93005 5.30284 7.4635C5.19673 7.99695 5.25119 8.54988 5.45933 9.05238C5.66747 9.55488 6.01995 9.98437 6.47218 10.2865C6.92442 10.5887 7.4561 10.75 8 10.75C8.72909 10.7492 9.42808 10.4592 9.94363 9.94363C10.4592 9.42808 10.7492 8.72909 10.75 8ZM3.21937 4.28062C3.28914 4.35039 3.37196 4.40573 3.46311 4.44349C3.55427 4.48124 3.65196 4.50068 3.75062 4.50068C3.84929 4.50068 3.94698 4.48124 4.03814 4.44349C4.12929 4.40573 4.21211 4.35039 4.28188 4.28062C4.35164 4.21086 4.40698 4.12804 4.44474 4.03689C4.48249 3.94573 4.50193 3.84804 4.50193 3.74938C4.50193 3.65071 4.48249 3.55302 4.44474 3.46186C4.40698 3.37071 4.35164 3.28789 4.28188 3.21813L3.53187 2.46813C3.39098 2.32723 3.19988 2.24807 3.00062 2.24807C2.80137 2.24807 2.61027 2.32723 2.46937 2.46813C2.32848 2.60902 2.24932 2.80012 2.24932 2.99938C2.24932 3.19863 2.32848 3.38973 2.46937 3.53063L3.21937 4.28062ZM3.21937 11.7181L2.46937 12.4681C2.39961 12.5379 2.34427 12.6207 2.30651 12.7119C2.26876 12.803 2.24932 12.9007 2.24932 12.9994C2.24932 13.098 2.26876 13.1957 2.30651 13.2869C2.34427 13.378 2.39961 13.4609 2.46937 13.5306C2.61027 13.6715 2.80137 13.7507 3.00062 13.7507C3.09929 13.7507 3.19698 13.7312 3.28814 13.6935C3.37929 13.6557 3.46211 13.6004 3.53187 13.5306L4.28188 12.7806C4.42277 12.6397 4.50193 12.4486 4.50193 12.2494C4.50193 12.0501 4.42277 11.859 4.28188 11.7181C4.14098 11.5772 3.94988 11.4981 3.75062 11.4981C3.55137 11.4981 3.36027 11.5772 3.21937 11.7181ZM12.25 4.5C12.3485 4.50008 12.4461 4.48074 12.5371 4.4431C12.6282 4.40546 12.7109 4.35025 12.7806 4.28062L13.5306 3.53063C13.6004 3.46086 13.6557 3.37804 13.6935 3.28689C13.7312 3.19573 13.7507 3.09804 13.7507 2.99938C13.7507 2.90071 13.7312 2.80302 13.6935 2.71186C13.6557 2.62071 13.6004 2.53789 13.5306 2.46813C13.4609 2.39836 13.378 2.34302 13.2869 2.30526C13.1957 2.26751 13.098 2.24807 12.9994 2.24807C12.9007 2.24807 12.803 2.26751 12.7119 2.30526C12.6207 2.34302 12.5379 2.39836 12.4681 2.46813L11.7181 3.21813C11.6126 3.32302 11.5407 3.45694 11.5115 3.60283C11.4823 3.74873 11.4971 3.90001 11.5542 4.03744C11.6112 4.17486 11.7078 4.29223 11.8317 4.37459C11.9556 4.45696 12.1012 4.50062 12.25 4.5ZM12.7806 11.7194C12.6397 11.5785 12.4486 11.4993 12.2494 11.4993C12.0501 11.4993 11.859 11.5785 11.7181 11.7194C11.5772 11.8603 11.4981 12.0514 11.4981 12.2506C11.4981 12.4499 11.5772 12.641 11.7181 12.7819L12.4681 13.5319C12.609 13.6728 12.8001 13.7519 12.9994 13.7519C13.1986 13.7519 13.3897 13.6728 13.5306 13.5319C13.6715 13.391 13.7507 13.1999 13.7507 13.0006C13.7507 12.8014 13.6715 12.6103 13.5306 12.4694L12.7806 11.7194ZM3 8C3 7.80109 2.92098 7.61032 2.78033 7.46967C2.63968 7.32902 2.44891 7.25 2.25 7.25H1.25C1.05109 7.25 0.860322 7.32902 0.71967 7.46967C0.579018 7.61032 0.5 7.80109 0.5 8C0.5 8.19891 0.579018 8.38968 0.71967 8.53033C0.860322 8.67098 1.05109 8.75 1.25 8.75H2.25C2.44891 8.75 2.63968 8.67098 2.78033 8.53033C2.92098 8.38968 3 8.19891 3 8ZM8 13C7.80109 13 7.61032 13.079 7.46967 13.2197C7.32902 13.3603 7.25 13.5511 7.25 13.75V14.75C7.25 14.9489 7.32902 15.1397 7.46967 15.2803C7.61032 15.421 7.80109 15.5 8 15.5C8.19891 15.5 8.38968 15.421 8.53033 15.2803C8.67098 15.1397 8.75 14.9489 8.75 14.75V13.75C8.75 13.5511 8.67098 13.3603 8.53033 13.2197C8.38968 13.079 8.19891 13 8 13ZM14.75 7.25H13.75C13.5511 7.25 13.3603 7.32902 13.2197 7.46967C13.079 7.61032 13 7.80109 13 8C13 8.19891 13.079 8.38968 13.2197 8.53033C13.3603 8.67098 13.5511 8.75 13.75 8.75H14.75C14.9489 8.75 15.1397 8.67098 15.2803 8.53033C15.421 8.38968 15.5 8.19891 15.5 8C15.5 7.80109 15.421 7.61032 15.2803 7.46967C15.1397 7.32902 14.9489 7.25 14.75 7.25Z'
          fill='white'
        />
      </svg>
    </>
  );
};
